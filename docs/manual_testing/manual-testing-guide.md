# Посібник з ручного тестування: CycleHunter

Цей документ описує кроки для ручного тестування всієї функціональності **CycleHunter** через термінал.

## 1. Попередні налаштування

Перед початком тестування переконайтеся, що у вас все налаштовано.

### 1.1. Віртуальне середовище та залежності

Для коректної роботи всіх скриптів потрібно активувати віртуальне середовище та встановити необхідні бібліотеки.

```bash
# Активуйте віртуальне середовище
source .venv/bin/activate
```

Якщо ви не встановлювали залежності, зробіть це:

```bash
pip install -r requirements.txt
```

### 1.2. API Ключі Binance

Для підключення до Binance потрібні API ключі.

1.  Створіть файл `.env` у кореневому каталозі проекту.
2.  Додайте до нього ваші ключі:

    ```
    BINANCE_API_KEY=your_api_key_here
    BINANCE_API_SECRET=your_api_secret_here
    ```

    **Важливо:** Для безпеки рекомендується використовувати ключі з правами "тільки для читання".

### 1.3. Конфігурація

Переконайтеся, що файл `configs/config.json` існує та містить базові налаштування. Якщо його немає, ви можете згенерувати його та інші файли, виконавши:
```bash
python3 -m cli_monitor.arbitrage.configurator
```

## 2. Тестування модуля `balance`

### 2.1. Одноразове отримання балансу

Ця команда показує поточний стан балансів.

1.  **Виконайте команду:**

    ```bash
    python3 -m cli_monitor balance get
    ```

2.  **Очікуваний результат:**
    - В консолі з'явиться відформатована інформація про загальний баланс та баланси для Spot, Futures та Earn.
    - У папці `output` будуть створені/оновлені файли `balance_output.json` та `balance_output.txt` з детальною інформацією про баланси.

### 2.2. Запуск моніторингу балансу

Ця команда запускає безперервне відстеження балансів.

1.  **Виконайте команду:**

    ```bash
    python3 -m cli_monitor balance monitor
    ```

2.  **Очікуваний результат:**
    - Скрипт буде безперервно працювати, оновлюючи дані кожні 60 секунд.
    - В консолі будуть з'являтися повідомлення про час оновлення даних.
    - Файли `output/balance_output.json` та `output/balance_output.txt` будуть постійно оновлюватися.

3.  **Зупинка:**
    Щоб зупинити моніторинг, натисніть `Ctrl+C` у терміналі.

## 3. Тестування модуля `arbitrage`

Рекомендований порядок тестування цього модуля — послідовне виконання кроків, оскільки вони залежать один від одного.

### 3.1. Генерація "білого списку" (Whitelist)

Скрипт генерує список ліквідних монет та пар для пошуку циклів.

1.  **Виконайте команду:**
    ```bash
    python3 -m cli_monitor arbitrage generate-whitelist
    ```
2.  **Очікуваний результат:**
    - В консолі з'являться логи про процес генерації.
    - У каталозі `configs/` буде створено/оновлено файл `whitelist.json`.

### 3.2. Генерація "чорного списку" (Blacklist)

Скрипт генерує список найменш ліквідних пар, які слід ігнорувати.

1.  **Виконайте команду:**
    ```bash
    python3 -m cli_monitor arbitrage generate-blacklist
    ```
2.  **Очікуваний результат:**
    - В консолі з'являться логи про процес генерації.
    - У каталозі `configs/` буде створено/оновлено файл `blacklist.json`.

### 3.3. Пошук арбітражних циклів

На цьому етапі скрипт знаходить усі можливі арбітражні цикли.

1.  **Виконайте команду:**
    ```bash
    python3 -m cli_monitor arbitrage find-cycles
    ```
    *Примітка: Ця команда може використовувати `monitored_coins` з `config.json` або `whitelist.json`, якщо вказати відповідний прапорець у коді.* 

2.  **Очікуваний результат:**
    - У каталозі `configs/` будуть створені/оновлені файли:
        - `possible_cycles.json`: список циклів у форматі JSON.
        - `possible_cycles.txt`: список циклів у зручному для читання форматі.

### 3.4. Запуск моніторингу прибутковості

Це основний крок, на якому бот починає відстежувати ціни в реальному часі та розраховувати прибутковість знайдених циклів.

1.  **Виконайте команду:**
    ```bash
    python3 -m cli_monitor arbitrage run-monitor
    ```
2.  **Очікуваний результат:**
    - Скрипт підключиться до WebSocket стрімів Binance.
    - Файли `output/all_profits.txt` та `output/all_profits.json` будуть оновлюватися кожні 2 секунди, показуючи поточну прибутковість **всіх** циклів.
    - Якщо буде знайдено прибуткову можливість (вищу за `min_profit_threshold`), інформація про неї буде залогована в консолі та записана у відповідні файли в `output/profits/`.
3.  **Зупинка:**
    Щоб зупинити моніторинг, натисніть `Ctrl+C` у терміналі.

## 4. Інші інструменти

### 4.1. Бектестінг

Ця команда дозволяє перевірити стратегію на історичних даних.

1.  **Виконайте команду:**
    ```bash
    python3 -m cli_monitor arbitrage backtest <start_date> <end_date>
    ```
    Замініть `<start_date>` та `<end_date>` на дати у форматі `YYYY-MM-DD`.

    Приклад:
    ```bash
    python3 -m cli_monitor arbitrage backtest 2023-01-01 2023-01-02
    ```

2.  **Очікуваний результат:**
    - Скрипт завантажить історичні дані та проаналізує їх.
    - Результати бектестінгу (тільки прибуткові цикли) будуть збережені у файлі `logs/backtest_results.log`.

### 4.2. Запуск автоматичного бота

Ця команда запускає довготривалий процес, який автоматично виконує щоденні оновлення та моніторинг.

1.  **Виконайте команду:**
    ```bash
    python3 -m cli_monitor arbitrage start-bot
    ```
2.  **Очікуваний результат:**
    - Бот запустить `generate-whitelist`, `generate-blacklist`, `find-cycles`.
    - Після цього запуститься `run-monitor`.
    - Цей цикл буде повторюватися кожні 24 години.
    - Всі логи будуть записуватися в консоль.
3.  **Зупинка:**
    Щоб зупинити бота, натисніть `Ctrl+C` у терміналі.
